from IndiceInvertido import InvertIndex


# Imprimir el retrieval como un ranking
def print_retrieval(retrieval):
    print("Retrieval: ")
    for i, doc in enumerate(retrieval):
        print(i+1, doc[0], doc[1])
    
    print("\n")

indiceInvertido = InvertIndex("index.txt")

indiceInvertido.building()


# Consulta 1: debe mostrar primero al libro 1 pues es una copia exacta. 
query1 = "La obra comienza con la noticia de la celebración del 111º cumpleaños de Bilbo Bolsón en la Comarca. Sin embargo, para Bilbo esta gran fiesta tenía como motivo principal su partida hacia su último viaje, producto del deseo de terminar sus días en paz y tranquilidad. El mago Gandalf, amigo de Bilbo y quien estaba informado de la decisión del hobbit, también acudió a la fiesta. Tras el discurso pronunciado por Bilbo, este se puso su anillo mágico y desapareció ante los sorprendidos hobbits. Gandalf, que sabía bien lo que acababa de hacer Bilbo, le encontró en Bolsón Cerrado y allí tuvo una pequeña discusión con él, ya que se negaba a dejar el anillo junto con el resto de la herencia a su sobrino Frodo; sin embargo, el mago acabó convenciéndole y Bilbo al fin partió. Entonces, debido a las dudas que le estaba ocasionando el anillo, Gandalf parte en busca de información sobre él, no sin antes informar a Frodo de que lo guarde y no lo toque. Casi veinte años después, Gandalf regresa a Bolsón Cerrado y le cuenta a Frodo lo que había descubierto sobre el Anillo: que se trataba del mismo que el Rey Isildur de Arnor le había arrebatado al Señor oscuro Sauron y que muchos años después había sido encontrado por la criatura Gollum tras haberse perdido en el río Anduin durante el Desastre de los Campos Gladios. Ambos quedaron entonces en reunirse de nuevo en la aldea de Bree con el fin de llevar luego el Anillo Único a Rivendel, donde los sabios decidirían sobre su destino. Junto con su jardinero Samsagaz Gamyi, Frodo traza un plan para salir de la Comarca con el pretexto de irse a vivir a Los Gamos; pero el plan acaba siendo descubierto por otros dos amigos, Pippin y Merry, que deciden acompañarle también. Tras adentrarse en el Bosque Viejo con el fin de evitar los caminos, los hobbits son atrapados por el Viejo Hombre-Sauce, un ucorno, que les tiende una trampa; sin embargo, son salvados por un misterioso personaje llamado Tom Bombadil. Tras pasar unos días en su casa, los hobbits parten de nuevo hacia Bree, pero acaban perdidos debido a la niebla y llegan a las Quebradas de los Túmulos. Allí son capturados por los Tumularios, pero de nuevo, tras cantar Frodo una canción que Tom Bombadil le enseñó, este acude en su ayuda y les salva, dándoles unas armas tumularias para que pudieran defenderse en su viaje. Una vez en Bree, los hobbits acuden a la posada «El Póney Pisador» donde Frodo había quedado con Gandalf. Accidentalmente, el hobbit se pone el Anillo y alerta así a los Nazgûl, los servidores de Sauron que le persiguen para arrebatárselo. Gracias a un amigo de Gandalf, llamado Aragorn, y al hobbit Nob, logran salvarse cuando los Nazgûl atacan la posada esa noche. Al día siguiente, acompañados por Aragorn, los hobbits parten hacia Rivendel. En su parada en Amon Sûl, los Nazgûl les atacan de nuevo, esta vez hiriendo a Frodo de gravedad. Tras combatirles, logran escapar y llegar cerca del vado de Bruinen, donde se encuentran con Glorfindel, un elfo de la casa de Elrond, que les acompaña hasta Rivendel. De nuevo perseguidos, Glorfindel ordena a su caballo Asfaloth que se adelante llevando a Frodo montado y, al llegar al río, los Nazgûl son arrastrados por su corriente gracias al poder de Rivendel."
retrieval = indiceInvertido.retrieval(query1,3)
print_retrieval(retrieval)

# Consulta 2: debe mostrar primero al libro 2 pues es una copia exacta
query2 = "Días después, Frodo despertó ante Gandalf en Rivendel y éste le contó lo ocurrido con los Nazgûl y como unos elfos le habían llevado hasta Elrond y él se encargó de su curación. Luego le informó sobre la celebración de un concilio al que acudirían representantes de los distintos pueblos de la Tierra Media y donde tratarían lo ocurrido y el tema del Anillo. En él, Gandalf reveló la traición de Saruman, a quien fue a pedir consejo y le retuvo preso en Isengard, y tras decidir que el Anillo debía ser destruido en los fuegos de Orodruin, Frodo se ofreció a llevarlo hasta allí. Sam, que a pesar de no estar invitado al Concilio había escuchado todo a escondidas, se ofreció para acompañar a su amo y Elrond decidiría más tarde que Gandalf, Aragorn, Merry, Pippin, un enano llamado Gimli, el príncipe Legolas de los elfos del Bosque Negro y el heredero a la senescalía de Gondor, Boromir, le acompañarían también, formando la que fue llamada la Comunidad del Anillo. Dos meses después, la Comunidad inició el viaje. Pasando por Acebeda (la antigua Eregion), llegaron hasta las Montañas Nubladas y decidieron cruzarlas por el Caradhras, ya que cuanto más se acercaran al paso de Rohan, más cerca estarían de Isengard y de ser capturados por Saruman. Sin embargo, ante la posible muerte de los hobbits debido al mal clima de la montaña, la Comunidad se vio obligada a dar la vuelta y a atravesar las montañas por las minas de Moria. Durante el camino hacia allí, la Comunidad fue atacada por los lobos de Sauron, pero consiguieron rechazarlos y llegar hasta la Puerta Oeste de Moria. Allí fueron atacados por el guardián del agua, un monstruo parecido a un kraken que se había asentado en un lago cercano a la puerta y que les encerró dentro de las minas. Poco después llegaron a la Cámara de Mazarbul, donde estaba la tumba de Balin, el señor de Moria, y donde Gandalf encontró un libro en el que un enano narraba los acontecimientos ocurridos en las minas y como el pueblo había sido aniquilado por los orcos. Entonces comenzaron a oírse tambores y aparecieron numerosos orcos. Tras derrotar a unos cuantos, la Comunidad logró escapar y llegar hasta el puente de Khazad Dûm. Allí un nuevo enemigo más poderoso apareció, un balrog, al cual Gandalf se enfrentó y logró arrojar por el puente; sin embargo, mientras caía, el balrog cogió al mago con su látigo y le arrastró con él hacia el abismo. Tras adentrarse en el Bosque Viejo con el fin de evitar los caminos, los hobbits son atrapados por el Viejo Hombre-Sauce, un ucorno, que les tiende una trampa; sin embargo, son salvados por un misterioso personaje llamado Tom Bombadil. Tras pasar unos días en su casa, los hobbits parten de nuevo hacia Bree, pero acaban perdidos debido a la niebla y llegan a las Quebradas de los Túmulos. Apenados por la muerte de Gandalf, los miembros de la Comunidad llegaron al bosque de Lothlórien, donde el elfo Haldir y sus hermanos les dieron cobijo y les condujeron hasta Celeborn y Galadriel, los señores del bosque. Tras pasar un mes descansando allí, la Comunidad partió en tres barcas élficas siguiendo el curso del río Anduin. En Sarn Gebir fueron alcanzados por los orcos que Saruman creó en Isengard, pero lograron esquivarlos cruzando a la otra orilla del río. Al llegar a los prados de Parth Galen, a los pies del Amon Hen, Frodo se apartó de los demás para reflexionar sobre si seguía solo el camino hacia Mordor, ya que no quería poner en peligro a sus amigos. Boromir, que llevaba tiempo deseando el Anillo, le siguió y le trató de convencer para que no destruyera el Anillo y lo llevara a su ciudad, Minas Tirith, para que fuera usado en la defensa contra Sauron. Ante la negativa del hobbit, Boromir intentó quitarle el Anillo y Frodo se lo puso para huir de él. Entonces Boromir se dio cuenta de lo que había hecho y regresó junto al resto de la Comunidad para contárselo. Todos salieron en busca de Frodo y Aragorn ordenó a Boromir que siguiera a Merry y a Pippin para protegerlos, mientras él seguía a Sam. Sin embargo, Sam encontró a Frodo a orillas del río y partió con él en una de las barcas antes de que Aragorn les encontrara. "
retrieval = indiceInvertido.retrieval(query2,3)
print_retrieval(retrieval)



